function _defineProperty(a,o,e){return o in a?Object.defineProperty(a,o,{value:e,enumerable:!0,configurable:!0,writable:!0}):a[o]=e,a}function translateButtonMessage(a){var o=CURRENCY||"BRL";return{BRL:messageButtonPtBr,USD:messageButtonEn,MXN:messageButtonEs,COP:messageButtonEs,EUR:messageButtonEn}[o][a]}function getDescricaoCondicaoDeCartaoSelecionada(a){var o,e=apenasParcelaUnica?1:$("select[data-name='parcelamento'][data-cartao='"+tipoDataCartao+"'] option:selected").val(),t=apenasParcelaUnica?montaValor(valor_plano,cartao,a,!0):montaValor($("select[data-name='parcelamento'][data-cartao='"+tipoDataCartao+"'] option:selected").attr("data-vlr-parcelado-sem-desconto"),cartao,a,!1);return o=a?Number($("select[data-name='parcelamento'][data-cartao='"+tipoDataCartao+"'] option:selected").attr("data-vlr-parcela")):Number($("select[data-name='parcelamento'][data-cartao='"+tipoDataCartao+"'] option:selected").attr("data-vlr-parcela-sem-desconto")),1==e?formatMoney(t):e+"x de "+formatMoney(o)}function formatMoney(a){return(a/100).toLocaleString("pt-br",{style:"currency",currency:CURRENCY})}function montaValor(a,o,e,t){return e&&(a=descontos[o]?descontos[o].valor:a),a=Math.max(0,a),t&&(a=a+Number(valor_frete)+valor_order_bump),a}function atualizaBoleto(a){$("#valor_boleto").html(formatMoney(montaValor(a,boleto,!0,!0)))}function atualizaPix(a){$("#valor_pix").html(formatMoney(montaValor(a,TIPO_PAGAMENTO.PIX,!0,!0)))}function atualizaValorTotal(){var a=$('[name="tipo_pagamento"]').val(),o=0;if(recebeContribuicao&&(o=parseFloat(montaValor(valor_plano,a,!0,!0)),$('input[name="valor_total_venda"]').val()||$('input[name="valor_total_venda"]').val((o/100).toLocaleString("pt-br",{style:"currency",currency:CURRENCY})),$('input[name="valor_total_venda"]').length>0&&(valor_total_venda=$('input[name="valor_total_venda"]').maskMoney("unmasked")[0]),$("#texto_valor_juros").removeClass("esconder"),$('input[name="valor_total_venda"]').length>0&&valor_total_venda>o/100)){valor_entrada_fracionado=100*valor_total_venda-o+valor_minimo_fracionado;var e=100*valor_total_venda<o?o:100*valor_total_venda;a==cartao?atualizaCartao(e):a!=fracionado||$("#primeira_cobranca_cartao").is(":checked")?a==fracionado&&$("#primeira_cobranca_cartao").is(":checked")?atualizaFracionado():a==boleto&&$("#valor_boleto").html(formatMoney(montaValor(e,boleto,!1,!1))):atualizaFracionado()}}function atualizaCartao(a,o){for(var e=1,t=0,r=0,n=0,l="",i=montaValor(a,cartao,o,o),c=montaValor(a,cartao,!1,!0),s=0;e<=parcelas;){e<=parcelas_sem_juros?(t=i/e,r=c/e,s=valor_original/e):(t=Number(i/((1-Math.pow(1+taxa_parcelamento,-e))/taxa_parcelamento)).toFixed(2),s=Number(valor_original/((1-Math.pow(1+taxa_parcelamento,-e))/taxa_parcelamento)).toFixed(2),r=Number(c/((1-Math.pow(1+taxa_parcelamento,-e))/taxa_parcelamento)).toFixed(2)),n=(split_parcela*Math.round(t)).toFixed(2),valor_parcelado_sem_desconto=(split_parcela*Math.round(r)).toFixed(2);var d=split_parcela==e?'selected="selected"':"";l=l+"<option data-vlr-parcela-original='"+s+"' data-vlr-parcelado-sem-desconto='"+valor_parcelado_sem_desconto+"' data-vlr-parcelado='"+n+"' data-valor_total='"+i+"' data-vlr-parcela='"+Math.round(t)+"' data-vlr-parcela-sem-desconto='"+Math.round(r)+"' "+d+" value='"+e+"'>"+e+"x de "+formatMoney(t)+"</option>",e++}$("select[data-name='parcelamento'][data-cartao='"+tipoDataCartao+"']").html(l).on("change",function(){split_parcela=this.value,$(".texto-assinatura").attr("valor_parcelado",getDescricaoCondicaoDeCartaoSelecionada(!0))}),$(".texto-assinatura").attr("valor_parcelado",getDescricaoCondicaoDeCartaoSelecionada(!0))}function atualizaFracionado(){if($("#primeira_cobranca_cartao").is(":checked"))return atualizaFracionadoComCartao();var a=valor_minimo_fracionado,o=valor_plano;recebeContribuicao&&(a=valor_entrada_fracionado,o=100*$('input[name="valor_total_venda"]').maskMoney("unmasked")[0],o=o>=valor_plano?o:valor_plano);for(var e=1,t=0,r="",a=recebeContribuicao?valor_entrada_fracionado:valor_minimo_fracionado,n=o-a,l=a+Number(valor_frete)+valor_order_bump;e<parcelas_boleto;){t=Math.ceil(n/e)+200;r=r+"<option "+(split_boleto==e+1?'selected="selected"':"")+"valor_total='"+Math.ceil(l+t*e)+"' value='"+(e+1)+"'>Entrada de "+formatMoney(l)+" + "+e+"x de "+formatMoney(t)+"</option>",e++}valorValido=!0,$("select[name='parcelamento_boleto']").html(r)}function atualizaFracionadoComCartao(){var a=valor_minimo_fracionado,o=valor_plano;recebeContribuicao&&(a=valor_entrada_fracionado,o=100*$('input[name="valor_total_venda"]').maskMoney("unmasked")[0],o=o>=valor_plano?o:valor_plano);var e=1,t=0,r="",n=100*$("input[data-name=valor_pagamento][data-cartao='"+tipoDataCartao+"']").maskMoney("unmasked")[0],l=o+Number(valor_frete)+valor_order_bump;valor_minimo=a+Number(valor_frete)+valor_order_bump,n>l-1e3&&(n=l-1e3,$("input[data-name=valor_pagamento][data-cartao='"+tipoDataCartao+"']").val((n/100).toLocaleString("pt-br",{minimumFractionDigits:2})));for(var i=n<valor_minimo?valor_minimo:n,c=l-i;e<parcelas_boleto;){if((t=Math.ceil(c/e))>=1e3){r=r+"<option "+(split_boleto==e+1?'selected="selected"':"")+"valor_total='"+((t+200)*e).toFixed(2)+"' value='"+(e+1)+"'>"+e+"x de "+formatMoney(t+200)+"</option>"}e++}if($("select[name='parcelamento_boleto']").html(r),isNaN(i)||(atualizaCartao(i,!1),atualizaTextoOrderBump()),$("#"+tipoDataCartao+"_valor-error").addClass("esconder"),n<valor_minimo){if(valorValido=!1,n>0)return $("#"+tipoDataCartao+"_valor-error").html("Valor mínimo de "+formatMoney(valor_minimo)),$("#"+tipoDataCartao+"_valor-error").removeClass("esconder")}else valorValido=!0}function atualizaTextoOrderBump(){var a=formatMoney(0),o=$('[name="tipo_pagamento"]').val();if(o==cartao?a=formatMoney(montaValor(valor_plano,cartao,!0,!0))+("BRL"==CURRENCY?" NO CARTÃO":" ON CARD"):o==fracionado&&$("#primeira_cobranca_cartao").is(":checked")?a=$("select[data-name='parcelamento'][data-cartao='"+tipoDataCartao+"'] option:selected").html()+" NO CARTÃO + "+$("#parcelamento_boleto option:selected").html()+" NO BOLETO PARCELADO":o==fracionado?a=$("#parcelamento_boleto option:selected").html()+" NO BOLETO PARCELADO":o==boleto?a=$("#valor_boleto").html()+" À VISTA NO BOLETO":o==pix&&(a=$("#valor_pix").html()+" À VISTA NO PIX"),compraComDoisCartoes){var e=$("select[data-name='parcelamento'][data-cartao='credito_1'] option:selected").html()+" NO PRIMEIRO CARTÃO",t=$("select[data-name='parcelamento'][data-cartao='credito_2'] option:selected").html()+" NO SEGUNDO CARTÃO";return void $(".order-bump--total").html(e+"<br/>"+t)}$(".order-bump--total").html(a)}function atualizaValorProdutoAdquirido(){var a=formatMoney(valor_plano),o=$(".produto-adquirindo .font-bold");if(o.css("color","#333").html(a),$("#cupom .is-valid").length||"true"==$("input[name=popup_ativo]").val()){var e=0;0!==valorCupom&&0!==valorComDescontoPopup?e=Math.min(valorCupom,valorComDescontoPopup):0!==valorCupom?e=valorCupom:0!==valorComDescontoPopup&&(e=valorComDescontoPopup),e=formatMoney(e),o.css("color","#3c763d").html(e)}}function geraTextoAssinatura(){if(exibirMensagem()){var a=[],o=Object.keys(CONFIGS_CUPOM_ASSINATURA),e=$('[name="tipo_pagamento"]').val(),t=formatMoney(Number(montaValor(valor_plano,cartao,!0,!1)));if($('input[name="hash_assinatura"]').val().length>0)return TRANSLATOR_SUBSCRIPTION["Será feita uma cobrança de"]+" "+valorParcelaCartao()+" "+TRANSLATOR_SUBSCRIPTION["referente a assinatura em atraso."];if(1==quantidadeCobrancas&&a.push(TRANSLATOR_SUBSCRIPTION["Cobrança única de"]+" "),e!=boleto&&e!=pix||(t=formatMoney(montaValor(valor_plano,boleto,!1,!1))),a.push(t),assinaturaPossuiPeriodoGratis()&&e==cartao&&(a=[TRANSLATOR_SUBSCRIPTION["Grátis por"]+" "+CONFIG_PLANO_PRIMEIRA_COBRANCA_ASS_DIAS+" "+TRANSLATOR_SUBSCRIPTION.dias+","],a.push(" "+TRANSLATOR_SUBSCRIPTION.depois+" "+t)),assinaturaPossuiValorDeEntrada()){if("plavy1j4"==planoHash){var r=$("select[data-name='parcelamento'][data-cartao='"+tipoDataCartao+"']").val(),n=formatMoney(montaValor(valor_original,$('[name="tipo_pagamento"]').val(),!0,!0));return aceitaParcelamentoAssinatura&&r>1&&(n=" "+r+TRANSLATOR_SUBSCRIPTION["x de"]+" "+formatMoney($("select[data-name='parcelamento'][data-cartao='"+tipoDataCartao+"'] option:selected").attr("data-vlr-parcela-original"))+" "),TRANSLATOR_SUBSCRIPTION["Será cobrado o valor de"]+" "+t+" "+TRANSLATOR_SUBSCRIPTION["(Frete amostra grátis) e após"]+" "+CONFIG_PLANO_PRIMEIRA_COBRANCA_ASS_DIAS+" "+TRANSLATOR_SUBSCRIPTION["dias da aquisição será cobrado o valor de"]+" "+n+" "+TRANSLATOR_SUBSCRIPTION["a cada"]+" "+periodoAssinatura+" "+TRANSLATOR_SUBSCRIPTION["dias pelo recebimento de uma unidade"]+" "+periodoLabel.toLowerCase()+"."}a=[t+" "+TRANSLATOR_SUBSCRIPTION["para os primeiros"]+" "+CONFIG_PLANO_PRIMEIRA_COBRANCA_ASS_DIAS+" "+TRANSLATOR_SUBSCRIPTION.dias+", "];var r=$("select[data-name='parcelamento'][data-cartao='"+tipoDataCartao+"']").val();1!=quantidadeCobrancas?a.push(TRANSLATOR_SUBSCRIPTION["depois cobranças recorrentes de"]+" "+formatMoney(valor_original)+" "):a.push(TRANSLATOR_SUBSCRIPTION["depois uma cobrança no valor de"]+" "+formatMoney(valor_original)+" "),aceitaParcelamentoAssinatura&&r>1&&(a.pop(),1!=quantidadeCobrancas?a.push(TRANSLATOR_SUBSCRIPTION["depois cobranças recorrentes de {parcela}x de"]+" "+formatMoney($("select[data-name='parcelamento'][data-cartao='"+tipoDataCartao+"'] option:selected").attr("data-vlr-parcela-original"))+" "):a.push(TRANSLATOR_SUBSCRIPTION["depois uma cobrança no valor de {parcela}x de"]+" "+formatMoney($("select[data-name='parcelamento'][data-cartao='"+tipoDataCartao+"'] option:selected").attr("data-vlr-parcela-original"))+" "))}if(cupomConfigAssinatura){var l=CONFIGS_CUPOM_ASSINATURA[o[cupomConfigAssinatura]];l==CONFIGS_CUPOM_ASSINATURA.TODAS_RECORRENCIA?(a=[t],e!=boleto&&e!=pix||(a=[formatMoney(montaValor(valor_plano,boleto,!0,!1))]),assinaturaPossuiPeriodoGratis()&&e==cartao&&(a=[TRANSLATOR_SUBSCRIPTION["Grátis por"]+" "+CONFIG_PLANO_PRIMEIRA_COBRANCA_ASS_DIAS+" "+TRANSLATOR_SUBSCRIPTION.dias+","],a.push(" "+TRANSLATOR_SUBSCRIPTION.depois+" "+t))):l==CONFIGS_CUPOM_ASSINATURA.PRIMEIRA_RECORRENCIA?(e==cartao&&(a.pop(),a.push(" "+TRANSLATOR_SUBSCRIPTION["uma cobrança de"]+" "+t),a.push(" "+TRANSLATOR_SUBSCRIPTION["depois cobranças recorrentes de"]+" "+formatMoney(valor_plano))),e!=boleto&&e!=pix||(a=[TRANSLATOR_SUBSCRIPTION["Uma cobrança de"]+" "+formatMoney(montaValor(valor_plano,boleto,!0,!1))],a.push(" "+TRANSLATOR_SUBSCRIPTION["depois cobranças recorrentes de"]+" "+formatMoney(valor_plano)))):!cupomConfigAssinatura||l==CONFIGS_CUPOM_ASSINATURA.PRIMEIRA_RECORRENCIA&&l==CONFIGS_CUPOM_ASSINATURA.TODAS_RECORRENCIA||(e==cartao&&(a.pop(),a.push(" {parcelaDesconto} "+TRANSLATOR_SUBSCRIPTION["cobrança de"]+" "+t),a.push(" "+TRANSLATOR_SUBSCRIPTION["depois cobranças recorrentes de"]+" "+formatMoney(valor_plano))),e!=boleto&&e!=pix||(a=[" {parcelaDesconto} "+TRANSLATOR_SUBSCRIPTION["cobrança de"]+" "+formatMoney(montaValor(valor_plano,boleto,!0,!1))],a.push(" "+TRANSLATOR_SUBSCRIPTION["depois cobranças recorrentes de"]+" "+ +formatMoney(valor_plano))))}1!=quantidadeCobrancas&&a.push(" "+TRANSLATOR_SUBSCRIPTION["a cada"]+' <span class="font-bold"> '+periodoAssinatura+" "+TRANSLATOR_SUBSCRIPTION.dias+".");var i=apenasParcelaUnica?1:$("select[data-name='parcelamento'][data-cartao='"+tipoDataCartao+"'] option:selected").val();return a.join("").replaceAll("{parcela}",i).replaceAll("{parcelaDesconto}",quantidadeRecorrencia)}}function valorParcelaCartao(){var a=apenasParcelaUnica?1:$("select[data-name='parcelamento'][data-cartao='"+tipoDataCartao+"'] option:selected").val(),o=Number(montaValor(valor_plano,cartao,!0,!1)),e=o/a;return a>parcelas_sem_juros&&(e=getParcelaComJuros(o,a)),formatMoney(e)}function getParcelaComJuros(a){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return Number(a/((1-Math.pow(1+taxa_parcelamento,-o))/taxa_parcelamento)).toFixed(2)}function assinaturaPossuiPeriodoGratis(){return 0==$('input[name="hash_assinatura"]').val().length&&CONFIGS_PRIMEIRA_COBRANCA_ASS.GRATIS_POR_X_DIAS==CONFIG_PLANO_PRIMEIRA_COBRANCA_ASS}function assinaturaPossuiValorDeEntrada(){return 0==$('input[name="hash_assinatura"]').val().length&&CONFIGS_PRIMEIRA_COBRANCA_ASS.VALOR_X_POR_N_DIAS==CONFIG_PLANO_PRIMEIRA_COBRANCA_ASS}function exibirMensagem(){var a=["che8zz1o"],o=!0;return window.location.pathname.split("/").splice(1).forEach(function(e){a.includes(e)&&(o=!1)}),o}function atualizaAssinatura(a){["order_bumps"].includes(a)||$(".texto-assinatura").length>0&&$(".texto-assinatura").html(geraTextoAssinatura())}function geraParcelamentoDoisCartoes(a){for(var o=1,e=0,t="";o<=parcelas;){e=1==o?a/o:Number(a/((1-Math.pow(1+taxa_parcelamento,-o))/taxa_parcelamento)).toFixed(2),valor_parcelado=(split_parcela*Math.round(e)).toFixed(2);var r=split_parcela==o?'selected="selected"':"";t=t+"<option data-vlr-parcela='"+Math.round(e)+"' "+r+" value='"+o+"'>"+o+"x de "+formatMoney(e)+"</option>",o++}return t}function atualizaDoisCartoes(a){var o=100*$(a).maskMoney("unmasked")[0],e=montaValor(valor_plano,cartao,!0,!0);if($(".valor_minimo_dois_cartoes").addClass("esconder"),o<1e3&&(o=1e3,$(a).maskMoney("mask",10),$("#"+tipoDataCartao+"_valor_minimo_dois_cartoes").removeClass("esconder"),window.setTimeout(function(){$(".valor_minimo_dois_cartoes").addClass("esconder")},3e3)),e-o<1e3||o>e-1e3)return void("credito_1"==$(a).data("cartao")?$(a).val((e/100-$('[data-cartao="credito_2"][data-name="valor_pagamento"]').maskMoney("unmasked")[0]).toLocaleString("pt-br",{minimumFractionDigits:2})):$(a).val((e/100-$('[data-cartao="credito_1"][data-name="valor_pagamento"]').maskMoney("unmasked")[0]).toLocaleString("pt-br",{minimumFractionDigits:2})));var t=(e-o)/100,r=t.toLocaleString("pt-br",{minimumFractionDigits:2});"credito_1"==$(a).data("cartao")?($('[data-cartao="credito_2"][data-name="valor_pagamento"]').val(r),$("select[data-name='parcelamento'][data-cartao='credito_2']").html(geraParcelamentoDoisCartoes(e-o))):($('[data-cartao="credito_1"][data-name="valor_pagamento"]').val(r),$("select[data-name='parcelamento'][data-cartao='credito_1']").html(geraParcelamentoDoisCartoes(e-o))),$("select[data-name='parcelamento'][data-cartao="+$(a).data("cartao")+"]").html(geraParcelamentoDoisCartoes(o)),$("select[data-name='parcelamento'][data-cartao='credito_1']").val(split_parcela_cartao_1),$("select[data-name='parcelamento'][data-cartao='credito_2']").val(split_parcela_cartao_2),atualizaTextoOrderBump()}function setCardPreview(){window.cardPreview=$(".card-cred#"+tipoDataCartao).length?new Card({form:document.querySelector("form"),container:".card-cred#"+tipoDataCartao,formSelectors:{numberInput:'[data-name="numero_cartao"][data-cartao="'+tipoDataCartao+'"]',expiryInput:'[data-name="mes"][data-cartao="'+tipoDataCartao+'"], [data-name="ano_exibido"][data-cartao="'+tipoDataCartao+'"]',cvcInput:'[data-name="codigo_seguranca"][data-cartao="'+tipoDataCartao+'"]',nameInput:'[data-name="full_name"][data-cartao="'+tipoDataCartao+'"]'}}):null}function translateCouponMessage(a){var o=CURRENCY||"BRL";return{BRL:messagesSwalCouponDiscountPtBr,USD:messagesSwalCouponDiscountEn,MXN:messagesSwalCouponDiscountEs,COP:messagesSwalCouponDiscountEs,EUR:messagesSwalCouponDiscountEn}[o][a]}function translateCouponPaymentType(a){var o=CURRENCY||"BRL";return{BRL:messageCouponPaymentTypePtBr,USD:messageCouponPaymentTypeEn,MXN:messageCouponPaymentTypeEs,COP:messageCouponPaymentTypeEs,EUR:messageCouponPaymentTypeEn}[o][a]}function descriptionCouponDiscount(a,o){var e,t=(e={},_defineProperty(e,TIPO_PAGAMENTO.TODOS,"all"),_defineProperty(e,TIPO_PAGAMENTO.BOLETO,"bank_slip"),_defineProperty(e,TIPO_PAGAMENTO.CARTAO,"card"),_defineProperty(e,TIPO_PAGAMENTO.FRACIONADO,"fractioned"),_defineProperty(e,TIPO_PAGAMENTO.GRATIS,"free"),_defineProperty(e,TIPO_PAGAMENTO.PIX,"pix"),e),r=translateCouponPaymentType(t[o]);return translateCouponPaymentType("discount_received")+": "+a+" "+r}function ativaCupom(){$("#possui-cupom").is(":checked")?$("#cupom").removeClass("hidden"):$("#cupom").addClass("hidden")}function removeCupom(){$('input[name="cupom_desconto"]').val(""),$('input[name="cupom_desconto"]').prop("disabled",!1),$(".input-group-btn button.btn.btn-default.valid").prop("disabled",!1),$('input[name="cupom_ativo"]').val("false"),$('input[name="cupom_hash"]').val(""),$(document).trigger("braip.desconto.update",[valor_plano,cupomDesconto,TIPO_DESCONTO.CUPOM])}function aplicaCupomDesconto(a){var o=$("#aplica_cupom"),e=window.location.href.split("af=")[1]||null,t=$("#documento").val(),r=$('input[name="tipo_pagamento"]').val(),n=$('input[name="cupom_desconto"]'),l=$('[name="venda"]').val();if(n.removeClass("is-invalid is-valid"),!n.val())return void(a&&n.addClass("is-invalid"));$.ajax({type:"GET",url:routeValidaCupom,data:{cupom_desconto:n.val(),valorTotal:valor_plano,plano:planoHash,afiliado:e,documento:t,tipo_pagamento:r,venda:l,currency:CURRENCY}}).done(function(e){if($("#cupom-error").addClass("esconder"),descontoPopupAtivo&&($('input[name="popup_ativo"]').val("false"),descontoPopupAtivo=!1),cupomAtivo=!0,valorCupom=e.totalDescontado,n.addClass("is-valid"),n.prop("disabled",!0),cupomConfigAssinatura=e.config_assinatura,quantidadeRecorrencia=e.quantidade_recorrencia,$('input[name="cupom_ativo"]').val("true"),$('input[name="cupom_hash"]').val(e.cupom_hash).change(),$("#ativa_cupom").addClass("esconder"),$(o).attr("disabled","disabled"),a){var t=translateCouponMessage("success_apply_coupon");swal(t.title,t.message,"success")}$(document).trigger("braip.desconto.update",[valorCupom,e.tipo_pagamento,TIPO_DESCONTO.CUPOM])}).fail(function(e){if(cupomAtivo=!1,valorCupom=0,descontoPopupAtivo&&($('input[name="popup_ativo"]').val("false"),descontoPopupAtivo=!1),422===e.status){var t=Object.keys(e.responseJSON.errors)[0],r=translateCouponMessage(t);a&&swal(r.title,r.message,"warning"),$("#cupom-error").html("- "+r.message).removeClass("esconder"),n.addClass("is-invalid")}else{if(a){var r=translateCouponMessage("error_applying_coupon");swal(r.title,r.message,"warning")}$("#cupom-error").html("- "+r.message).removeClass("esconder"),n.addClass("is-invalid")}n.prop("disabled",!1),$('input[name="cupom_ativo"]').val("false"),$('input[name="cupom_hash"]').val(""),$("#ativa_cupom").removeClass("esconder"),$(o).attr("disabled",!1)})}function isCanSaveLocalStorage(){try{return localStorage.setItem("test__Braip","1234567"),localStorage.removeItem("test__Braip"),!0}catch(a){return!1}}if(void 0===compraComDoisCartoes)var compraComDoisCartoes=!1;var valor_frete=0,valor_order_bump=0,tipoDataCartao=$('[name="tipo_pagamento"]').val()==TIPO_PAGAMENTO.CARTAO?"credito":"fracionado",valor_minimo=valor_minimo_fracionado+Number(valor_frete)+valor_order_bump,valor_entrada_fracionado=valor_minimo,valorValido=!0,split_parcela_cartao_1=split_parcela,split_parcela_cartao_2=split_parcela;$(function(){$("#valor_total_venda").length>0&&($("#valor_total_venda").maskMoney({prefix:"R$ ",thousands:".",decimal:",",allowNegative:!1,allowZero:!1}),$("#valor_total_venda").keyup(function(){$(document).trigger("braip.pagamento.update")})),$("div[data-value-order-bump]").each(function(a,o){$(o).find(".font-bold").text(formatMoney(o.dataset.valueOrderBump))})}),$(document).ready(function(){if($(document).on("change","input[data-name=valor_pagamento]",function(a){"fracionado"==tipoDataCartao&&(atualizaFracionadoComCartao(),atualizaValorTotal())}),$("input[data-name=valor_pagamento][data-cartao*='credito_']").change(function(){atualizaDoisCartoes($(this))}),$('a[data-toggle="tab"]').on("shown.bs.tab",function(a){if("#dois_cartoes"==a.currentTarget.hash)return $('[name="dois_cartoes"]').val(1),compraComDoisCartoes=!0,tipoDataCartao="credito_1",void atualizaTextoOrderBump();tipoDataCartao="credito",compraComDoisCartoes=!1,$('[name="dois_cartoes"]').val(0),$(document).trigger("braip.pagamento.update")}),$(document).on("change","input#valor_total_venda",function(a){var o=$("input#valor_total_venda").maskMoney("unmasked")[0],e=parseFloat(montaValor(valor_plano,$('input[name="tipo_pagamento"]').val(),!0,!0));e>100*o&&$('input[name="valor_total_venda"]').val((e/100).toLocaleString("pt-br",{style:"currency",currency:CURRENCY}))}),setCardPreview(),$(document).on("braip.pagamento.update",function(a){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;atualizaBoleto(valor_plano),atualizaCartao(valor_plano,!0),atualizaPix(valor_plano),atualizaFracionado(),atualizaAssinatura(o),atualizaValorTotal(),$('[data-cartao="credito_2"][data-name="valor_pagamento"]').length&&atualizaDoisCartoes($('[data-cartao="credito_2"][data-name="valor_pagamento"]')),atualizaTextoOrderBump(),atualizaValorProdutoAdquirido()}),$("[data-pagamento]").on("click",function(a){a.preventDefault(),$("#primeira_cobranca_cartao").prop("checked",!1).change(),$(".pagamento").addClass("hidden"),$("[data-pagamento]").removeClass("active"),$(this).addClass("active"),$(".pagamento#pagamento-"+this.dataset.pagamento).removeClass("hidden"),$('input[name="tipo_pagamento"]').val(this.dataset.tipoPagamento).change(),tipoDataCartao="cartao"==this.dataset.pagamento?"credito":"fracionado",setCardPreview(),$(document).trigger("braip.pagamento.update",["data-pagamento"]),compraComDoisCartoes="cartao"==this.dataset.pagamento&&"dois_cartoes"==$(".tab-content").find(".active").attr("id"),aplicaCupomDesconto(!1)}),$("#primeira_cobranca_cartao").on("change",function(){$("#primeira_cobranca_cartao").is(":checked")?($("input[data-name=valor_pagamento][data-cartao='"+tipoDataCartao+"']").val()||$("input[data-name=valor_pagamento][data-cartao='"+tipoDataCartao+"']").val((valor_minimo_fracionado/100).toLocaleString("pt-br",{minimumFractionDigits:2})),$(".pagamento#pagamento-cartao[data-cartao='"+tipoDataCartao+"']").removeClass("hidden")):$(".pagamento#pagamento-cartao[data-cartao='"+tipoDataCartao+"']").addClass("hidden"),atualizaFracionado()}),$('[name="order_bumps[]"]').on("change",function(){valor_order_bump=0,$(".order-bump-checkbox").each(function(){$(this).is(":checked")&&(valor_order_bump+=parseInt($(this).attr("data-valor")))}),$(document).trigger("braip.pagamento.update",["order_bumps"])}),$("[data-name=parcelamento], #parcelamento_boleto").on("change",function(){compraComDoisCartoes||("parcelamento"==this.dataset.name?split_parcela=this.value:split_boleto=this.value,$(document).trigger("braip.pagamento.update"))}),$("select[data-cartao*='credito_']").change(function(a){if(atualizaTextoOrderBump(),"credito_1"==a.target.dataset.cartao)return void(split_parcela_cartao_1=$(this).val());split_parcela_cartao_2=$(this).val()}),$(document).trigger("braip.pagamento.update"),$(".order-bump-checkbox")&&$(".order-bump-checkbox").length>0&&$(".btn-add-carrinho").on("click",function(a){var o=$(a.currentTarget),e=o.parent().parent().find(".order-bump-checkbox");if(o.hasClass("btn-success")){var t=translateButtonMessage("remove_of_cart");o.removeClass("btn-success").addClass("btn-danger").html('<i class="fas fa-shopping-cart"></i> '+t),e.prop("checked",!0).change()}else{var t=translateButtonMessage("add_to_cart");o.removeClass("btn-danger").addClass("btn-success").html('<i class="fas fa-shopping-cart"></i> '+t),e.prop("checked",!1).change()}}),$("[data-cartao='credito_1']").length>0&&$("[data-cartao='credito_2']").length>0)for(var a=1;a<=2;a++)new Card({form:document.querySelector("form"),container:".card-cred#credito_"+a,formSelectors:{numberInput:'[data-name="numero_cartao"][data-cartao="credito_'+a+'"]',expiryInput:'[data-name="mes"][data-cartao="credito_'+a+'"], [data-name="ano_exibido"][data-cartao="credito_'+a+'"]',cvcInput:'[data-name="codigo_seguranca"][data-cartao="credito_'+a+'"]',nameInput:'[data-name="full_name"][data-cartao="credito_'+a+'"]'}}),$(".card-cred#credito_"+a).hide();$(".btn-add-carrinho.add").trigger("click"),$(window).on("load",function(){$("select[data-name='parcelamento'][data-cartao='credito']").length>0&&"1"!=$("select[data-name='parcelamento'][data-cartao='credito']").val()&&$("select[data-name='parcelamento'][data-cartao='credito']").trigger("change")})}),$(function(){$(document).on("braip.desconto.update",function(a,o,e,t){t==TIPO_DESCONTO.BOLETO&&descontos[TIPO_PAGAMENTO.BOLETO]&&o>descontos[TIPO_PAGAMENTO.BOLETO].valor||(descontos[e]={valor:o,diferenca:valor_plano-o,tipoPagamento:e,tipoDesconto:t},e==TIPO_PAGAMENTO.TODOS&&[TIPO_PAGAMENTO.BOLETO,TIPO_PAGAMENTO.CARTAO,TIPO_PAGAMENTO.PIX].forEach(function(a){descontos[a]&&descontos[a].valor<o||(descontos[a]=descontos[TIPO_PAGAMENTO.TODOS])}),t==TIPO_DESCONTO.CUPOM&&(cupomDesconto=e),t!=TIPO_DESCONTO.POPUP&&t!=TIPO_DESCONTO.CUPOM||(descontoPopupAtivo=t==TIPO_DESCONTO.POPUP,cupomAtivo=t==TIPO_DESCONTO.CUPOM,$('input[name="popup_ativo"]').val(String(descontoPopupAtivo)),$('input[name="cupom_ativo"]').val(String(cupomAtivo))),$(document).trigger("braip.pagamento.update"),$(document).trigger("braip.desconto.render"))}),$(document).on("braip.desconto.render",function(){var a=$('input[name="tipo_pagamento"]').val();if($("#total_descontos").addClass("esconder"),descontos[a]&&0!=descontos[a].diferenca){var o=descriptionCouponDiscount(formatMoney(descontos[a].diferenca),String(descontos[a].tipoPagamento));$("#total_descontos").removeClass("esconder").html(o)}}),$('input[name="tipo_pagamento"]').on("change",function(){this.value==TIPO_PAGAMENTO.BOLETO&&valorComDescontoBoleto&&$(document).trigger("braip.desconto.update",[valorComDescontoBoleto,TIPO_PAGAMENTO.BOLETO,TIPO_DESCONTO.BOLETO]),this.value==TIPO_PAGAMENTO.CARTAO&&valorComDescontoCredito&&$(document).trigger("braip.desconto.update",[valorComDescontoCredito,TIPO_PAGAMENTO.CARTAO,TIPO_DESCONTO.CARTAO]),this.value==TIPO_PAGAMENTO.PIX&&valorComDescontoPix&&$(document).trigger("braip.desconto.update",[valorComDescontoPix,TIPO_PAGAMENTO.PIX,TIPO_DESCONTO.PIX]),$(document).trigger("braip.desconto.render")}),$('[data-popup="desconto"]').on("click",function(){$("#popupDesconto").modal("hide"),swal({title:"Desconto aplicado!",type:"success",timer:"2000",showConfirmButton:!1}),$(document).trigger("braip.desconto.update",[valorComDescontoPopup,temPopupBoleto?TIPO_PAGAMENTO.TODOS:TIPO_PAGAMENTO.CARTAO,TIPO_DESCONTO.POPUP])}),aplicaCupomDesconto(!1),$("#aplica_cupom").on("click",function(){aplicaCupomDesconto(!0)}),ativaCupom(),$("#possui-cupom").on("change",function(){ativaCupom()})});var eventInitiateSent=!1,getCookie=function(a){var o="; "+document.cookie,e=o.split("; "+a+"=");if(2===e.length)return e.pop().split(";").shift()},sendInitiateCheckoutEvent=function(a){if(!(eventInitiateSent||a.email&&!emailValido(a.email)||a.celular&&!a.celular.replace(/\D/g,"").length>=5)){a.pixels=pixels,a.fbp=getCookie("_fbp"),a.fbc=getCookie("_fbc"),eventInitiateSent=!0;var o="undefined"==typeof campanhaHash?"":campanhaHash;$.ajax({headers:{"X-CSRF-TOKEN":$("meta[name='csrf-token']").attr("content")},type:"POST",url:routeEnviaPixelCheckout,data:{produto:produtoHash,plano:planoHash,checkout:checkoutHash,campanha:o,data:a}})}},LocalStorage={buscaComprador:function(){var a=["nome","email","celular","documento"],o={};return a.forEach(function(a){localStorage.getItem(a)&&($("input[name='"+a+"']").val(localStorage.getItem(a)),o[a]=localStorage.getItem(a))}),o},buscaEndereco:function(){var a=["cep","endereco","num_endereco","complemento","bairro","cidade"],o={};return a.forEach(function(a){localStorage.getItem(a)&&"undefined"!=localStorage.getItem(a)&&($("input[name='"+a+"']").val(localStorage.getItem(a)),o[a]=localStorage.getItem(a))}),localStorage.getItem("estado")&&"undefined"!=localStorage.getItem("estado")&&($("select[name='estado']").val(localStorage.getItem("estado")),o.estado=localStorage.getItem("estado")),$("#divEndereco").removeClass("esconder"),o},salva:function(){localStorage.setItem("nacionalidade",$('input[name="nacionalidade"]:checked').val()),localStorage.setItem("nome",$("input[name='nome']").val()),localStorage.setItem("email",$("input[name='email']").val()),localStorage.setItem("pais",$("select[name='pais']").val()),localStorage.setItem("celular",$("input[name='celular']").val()),localStorage.setItem("documento",$("input[name='documento']").val()),localStorage.setItem("cep",$("input[name='cep']").val()),localStorage.setItem("endereco",$("input[name='endereco']").val()),localStorage.setItem("numero",$("input[name='numero']").val()),localStorage.setItem("num_endereco",$("input[name='num_endereco']").val()),localStorage.setItem("complemento",$("input[name='complemento']").val()),localStorage.setItem("bairro",$("input[name='bairro']").val()),localStorage.setItem("cidade",$("input[name='cidade']").val()),localStorage.setItem("estado",$("select[name='estado']").val())}};$(document).ready(function(){var a={};isCanSaveLocalStorage()&&void 0!==window.localStorage&&0==$('[name="hash_upsell"]').length&&!$('[name="venda"]').val()&&(a=LocalStorage.buscaComprador(),localStorage.getItem("cidade")&&(a=Object.assign(a,LocalStorage.buscaEndereco())),Object.keys(a).length>0&&"function"==typeof sendInitiateCheckoutEvent&&sendInitiateCheckoutEvent(a))});