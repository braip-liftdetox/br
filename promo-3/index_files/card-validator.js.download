var cardValidator=function(e){"use strict";var o=function(e){for(var t,n=0,r=!1,i=e.length-1;0<=i;)t=parseInt(e.charAt(i),10),r&&9<(t*=2)&&(t=t%10+1),r=!r,n+=t,i--;return n%10==0},i={visa:{niceType:"Visa",type:"visa",patterns:[4],gaps:[4,8,12],lengths:[16,18,19],code:{name:"CVV",size:3}},mastercard:{niceType:"Mastercard",type:"mastercard",patterns:[[51,55],[2221,2229],[223,229],[23,26],[270,271],2720],gaps:[4,8,12],lengths:[16],code:{name:"CVC",size:3}},"american-express":{niceType:"American Express",type:"american-express",patterns:[34,37],gaps:[4,10],lengths:[15],code:{name:"CID",size:4}},"diners-club":{niceType:"Diners Club",type:"diners-club",patterns:[[300,305],36,38,39],gaps:[4,10],lengths:[14,16,19],code:{name:"CVV",size:3}},discover:{niceType:"Discover",type:"discover",patterns:[6011,[644,649],65],gaps:[4,8,12],lengths:[16,19],code:{name:"CID",size:3}},jcb:{niceType:"JCB",type:"jcb",patterns:[2131,1800,[3528,3589]],gaps:[4,8,12],lengths:[16,17,18,19],code:{name:"CVV",size:3}},unionpay:{niceType:"UnionPay",type:"unionpay",patterns:[620,[624,626],[62100,62182],[62184,62187],[62185,62197],[62200,62205],[622010,622999],622018,[622019,622999],[62207,62209],[622126,622925],[623,626],6270,6272,6276,[627700,627779],[627781,627799],[6282,6289],6291,6292,810,[8110,8131],[8132,8151],[8152,8163],[8164,8171]],gaps:[4,8,12],lengths:[14,15,16,17,18,19],code:{name:"CVN",size:3}},maestro:{niceType:"Maestro",type:"maestro",patterns:[493698,[5e5,506698],[506779,508999],[56,59],63,67,6],gaps:[4,8,12],lengths:[12,13,14,15,16,17,18,19],code:{name:"CVC",size:3}},elo:{niceType:"Elo",type:"elo",patterns:[401178,401179,438935,457631,457632,431274,451416,457393,504175,[506699,506778],[509e3,509999],627780,636297,636368,[650031,650033],[650035,650051],[650405,650439],[650485,650538],[650541,650598],[650700,650718],[650720,650727],[650901,650978],[651652,651679],[655e3,655019],[655021,655058]],gaps:[4,8,12],lengths:[16],code:{name:"CVE",size:3}},mir:{niceType:"Mir",type:"mir",patterns:[[2200,2204]],gaps:[4,8,12],lengths:[16,17,18,19],code:{name:"CVP2",size:3}},hiper:{niceType:"Hiper",type:"hiper",patterns:[637095,637568,637599,637609,637612],gaps:[4,8,12],lengths:[16],code:{name:"CVC",size:3}},hipercard:{niceType:"Hipercard",type:"hipercard",patterns:[606282],gaps:[4,8,12],lengths:[16],code:{name:"CVC",size:3}}};var l=function(e){return e?JSON.parse(JSON.stringify(e)):null};var t=function(e){if(function(e){var t=e.filter(function(e){return e.matchStrength}).length;return 0<t&&t===e.length}(e))return e.reduce(function(e,t){return e?e.matchStrength<t.matchStrength?t:e:t})};var a=function(e){return"string"==typeof e||e instanceof String};var p=function(e,t){return Array.isArray(t)?function(e,t,n){var r=String(t).length,i=e.substr(0,r),a=parseInt(i,10);return t=parseInt(String(t).substr(0,i.length),10),n=parseInt(String(n).substr(0,i.length),10),t<=a&&a<=n}(e,t[0],t[1]):function(e,t){return(t=String(t)).substring(0,e.length)===e.substring(0,t.length)}(e,t)};var s,u=function(e,t,n){var r,i,a,s;for(r=0;r<t.patterns.length;r++)if(i=t.patterns[r],p(e,i)){s=l(t),a=Array.isArray(i)?String(i[0]).length:String(i).length,e.length>=a&&(s.matchStrength=a),n.push(s);break}},c={},n={VISA:"visa",MASTERCARD:"mastercard",AMERICAN_EXPRESS:"american-express",DINERS_CLUB:"diners-club",DISCOVER:"discover",JCB:"jcb",UNIONPAY:"unionpay",MAESTRO:"maestro",ELO:"elo",MIR:"mir",HIPER:"hiper",HIPERCARD:"hipercard"},r=[n.VISA,n.MASTERCARD,n.AMERICAN_EXPRESS,n.DINERS_CLUB,n.DISCOVER,n.JCB,n.UNIONPAY,n.MAESTRO,n.ELO,n.MIR,n.HIPER,n.HIPERCARD];function g(e){return c[e]||i[e]}function h(e,t){var n=s.indexOf(e);if(!t&&-1===n)throw new Error('"'+e+'" is not a supported card type.');return n}function d(n){var e,r=[];return a(n)?0===n.length?s.map(function(e){return l(g(e))}):(s.forEach(function(e){var t=g(e);u(n,t,r)}),(e=t(r))?[e]:r):[]}s=l(r),d.getTypeInfo=function(e){return l(g(e))},d.removeCard=function(e){var t=h(e);s.splice(t,1)},d.addCard=function(e){var t=h(e.type,!0);c[e.type]=e,-1===t&&s.push(e.type)},d.updateCard=function(e,t){var n,r=c[e]||i[e];if(!r)throw new Error('"'+e+'" is not a recognized type. Use `addCard` instead.');if(t.type&&r.type!==t.type)throw new Error("Cannot overwrite type parameter.");n=l(r),Object.keys(n).forEach(function(e){t[e]&&(n[e]=t[e])}),c[n.type]=n},d.changeOrder=function(e,t){var n=h(e);s.splice(n,1),s.splice(t,0,e)},d.resetModifications=function(){s=l(r),c={}},d.types=n;var y=d;function f(e,t,n){return{card:e,isPotentiallyValid:t,isValid:n}}function m(e,t){var n,r,i,a,s;if(t=t||{},"number"==typeof e&&(e=String(e)),"string"!=typeof e)return f(null,!1,!1);if(e=e.replace(/\-|\s/g,""),!/^\d*$/.test(e))return f(null,!1,!1);if(0===(n=y(e)).length)return f(null,!1,!1);if(1!==n.length)return f(null,!0,!1);if(r=n[0],t.maxLength&&e.length>t.maxLength)return f(r,!1,!1);for(i=r.type===y.types.UNIONPAY&&!0!==t.luhnValidateUnionPay||o(e),s=Math.max.apply(null,r.lengths),t.maxLength&&(s=Math.min(t.maxLength,s)),a=0;a<r.lengths.length;a++)if(r.lengths[a]===e.length)return f(r,e.length<s||i,i);return f(r,e.length<s,!1)}function v(e,t,n){return{isValid:e,isPotentiallyValid:t,isCurrentYear:n||!1}}var C=function(e,t){var n,r,i,a,s;return t=t||19,"string"!=typeof e?v(!1,!1):""===e.replace(/\s/g,"")?v(!1,!0):/^\d*$/.test(e)?(r=e.length)<2?v(!1,!0):(n=(new Date).getFullYear(),3===r?v(!1,e.slice(0,2)===String(n).slice(0,2)):4<r?v(!1,!1):(e=parseInt(e,10),i=Number(String(n).substr(2,2)),2===r?(s=i===e,a=i<=e&&e<=i+t):4===r&&(s=n===e,a=n<=e&&e<=n+t),v(a,a,s))):v(!1,!1)},V=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};var S=function(e){var t,n;return/^\d{4}-\d{1,2}$/.test(e)?e=e.split("-").reverse():/\//.test(e)?e=e.split(/\s*\/\s*/g):/\s/.test(e)&&(e=e.split(/ +/g)),V(e)?{month:e[0]||"",year:e.slice(1).join()}:(n=function(e){var t,n=Number(e[0]);return 0===n?2:1<n?1:1===n&&2<Number(e[1])?1:1===n?(t=e.substr(1),C(t).isPotentiallyValid?1:2):5===e.length?1:5<e.length?2:1}(e),{month:t=e.substr(0,n),year:e.substr(t.length)})};function b(e,t,n){return{isValid:e,isPotentiallyValid:t,isValidForThisYear:n||!1}}var E=function(e){var t,n,r=(new Date).getMonth()+1;return"string"!=typeof e?b(!1,!1):""===e.replace(/\s/g,"")||"0"===e?b(!1,!0):/^\d*$/.test(e)?(t=parseInt(e,10),isNaN(e)?b(!1,!1):b(n=0<t&&t<13,n,n&&r<=t)):b(!1,!1)};function A(e,t,n,r){return{isValid:e,isPotentiallyValid:t,month:n,year:r}}var I=3;function R(e,t){return{isValid:e,isPotentiallyValid:t}}function T(e,t){return{isValid:e,isPotentiallyValid:t}}var P={number:m,expirationDate:function(e,t){var n,r,i,a;if("string"==typeof e)e=e.replace(/^(\d\d) (\d\d(\d\d)?)$/,"$1/$2"),n=S(e);else{if(null===e||"object"!=typeof e)return A(!1,!1,null,null);n={month:String(e.month),year:String(e.year)}}if(r=E(n.month),i=C(n.year,t),r.isValid){if(i.isCurrentYear)return A(a=r.isValidForThisYear,a,n.month,n.year);if(i.isValid)return A(!0,!0,n.month,n.year)}return r.isPotentiallyValid&&i.isPotentiallyValid?A(!1,!0,null,null):A(!1,!1,null,null)},expirationMonth:E,expirationYear:C,cvv:function(e,t){return t=(t=t||I)instanceof Array?t:[t],"string"!=typeof e?R(!1,!1):/^\d*$/.test(e)?function(e,t){for(var n=0;n<e.length;n++)if(t===e[n])return!0;return!1}(t,e.length)?R(!0,!0):e.length<Math.min.apply(null,t)?R(!1,!0):e.length>function(e){for(var t=I,n=0;n<e.length;n++)t=e[n]>t?e[n]:t;return t}(t)?R(!1,!1):R(!0,!0):R(!1,!1)},postalCode:function(e,t){var n;return n=(t=t||{}).minLength||3,"string"!=typeof e?T(!1,!1):e.length<n?T(!1,!0):T(!0,!0)},creditCardType:y},x=P.number,M=P.expirationDate,N=P.expirationMonth,D=P.expirationYear,O=P.cvv,z=P.postalCode,Y=P.creditCardType;return e.creditCardType=Y,e.cvv=O,e.default=P,e.expirationDate=M,e.expirationMonth=N,e.expirationYear=D,e.number=x,e.postalCode=z,e}({});
