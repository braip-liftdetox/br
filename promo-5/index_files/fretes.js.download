function buscaCEP(){$("#cep").val().length>=9&&buscaEnderecoPeloCEP()}function buscaEnderecoPeloCEP(){var e=$("#cep").val();e.length>=9&&($(".loadding-endereco").removeClass("hidden"),$("#cep").attr("disabled","true"),$.getJSON("https://viacep.com.br/ws/"+e+"/json/").done(function(e){void 0!=e.erro&&e.erro&&$("#cep-invalido").removeClass("hidden"),"erro"in e?$("input[name='cep_invalido']").val(1):($("#cep-invalido").addClass("hidden"),preencheInformacoesDeEndereco(e),formatoProdutoId==PRODUTO_FISICO&&buscaValoresDeFretePeloCEP(),$("input[name='cep_invalido']").val("")),liberaCamposFrete()}).fail(function(){$("#cep-invalido").text("Erro ao buscar o CEP informado."),liberaCamposFrete()}))}function preencheInformacoesDeEndereco(e){e.logradouro&&$("input[name='endereco']").val(e.logradouro),e.bairro&&$("input[name='bairro']").val(e.bairro),e.localidade&&$("input[name='cidade']").val(e.localidade),e.uf&&$("select[name='estado']").val(e.uf)}function buscaValoresDeFretePeloCEP(){var e=$("#cep").val();$(".loadding-valores-frete").removeClass("hidden"),$("#cep").attr("disabled","true"),$.ajax({type:"GET",url:routeCalculaFrete,data:{cep:e,plano_hash:$("input[name='plano_hash']").val()},success:function(e){preencheValoresDeFrete(e),$("#cep").removeAttr("disabled"),$(".loadding-valores-frete").addClass("hidden")}})}function preencheValoresDeFrete(e){$("#envio-pac").addClass("hidden"),$("#envio-sedex").addClass("hidden"),$.each(e,function(e,a){"PAC"!=a.servico&&"Marketing Direto"!=a.servico||($("#envio-pac").removeClass("hidden"),$("#pac").html(a.servico),"Marketing Direto"==a.servico&&($("#pac").html("Frete"),$("#descricao-pac").removeClass("hidden"),$("#descricao_envio").html('<div style="display:inline-flex;align-items: center;"><div class="col-sm-1"><i style="font-size:12px;" class="fa fa-question-circle"></i></div> <div class="col-sm-11" style="font-weight:400;">O envio deste produto pode não possuir método de rastreio para acompanhar o processo de entrega.</div></div>')),$("#pac-valor").html("R$ "+(a.valor/100).toFixed(2).replace(".",",")),a.valor||$("#pac-valor").html("Frete Grátis!"),isNaN(a.prazo)?$("#pac-prazo").html(a.prazo):$("#pac-prazo").html("até "+a.prazo+" dias"),$("#envio-pac").find("input").attr("data-valor",a.valor)),"SEDEX"==a.servico&&($("#envio-sedex").removeClass("hidden"),$("#sedex").html(a.servico),$("#sedex-valor").html("R$ "+(a.valor/100).toFixed(2).replace(".",",")),$('input[name="servico"]').attr("data-valor"),$("#envio-sedex").find("input").attr("data-valor",a.valor),a.valor||$("#sedex-valor").html("Frete Grátis!"),isNaN(a.prazo)?$("#sedex-prazo").html(a.prazo):$("#sedex-prazo").html(a.prazo+" dias"))});var a=$("table#fretes tbody input:visible:first");a.prop("checked","checked"),a.triggerHandler("change")}function liberaCamposFrete(){$("#cep").removeAttr("disabled"),$(".item-endereco").removeAttr("disabled"),$(".loadding-endereco").addClass("hidden"),$("#div-frete").removeClass("hidden")}$(document).ready(function(){$('input[name="servico"]').on("change",function(){valor_frete=$('input[name="servico"]:checked').attr("data-valor"),$('input[name="servico"]:checked').addClass("valid"),$(document).trigger("braip.pagamento.update")});var e={clearIfNotMatch:!0,onComplete:function(e){buscaCEP()}};$(".cep").mask("00000-000",e),isCanSaveLocalStorage()&&void 0!==window.localStorage&&$("#cep").val()&&setTimeout(function(){buscaCEP()},500)});